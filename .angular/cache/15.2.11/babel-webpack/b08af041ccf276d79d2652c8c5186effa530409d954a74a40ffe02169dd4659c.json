{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/appointment.service\";\nimport * as i2 from \"@angular/material/button\";\nimport * as i3 from \"@angular/material/table\";\nimport * as i4 from \"@angular/common\";\nfunction UserAppointmentsComponent_div_1_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" T\\u00EAn B\\u00E1c S\\u0129 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", appointment_r19.doctor.user.firstName, \" \", appointment_r19.doctor.user.lastName, \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" T\\u00EAn Ng\\u01B0\\u1EDDi \\u0110\\u1EB7t \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", appointment_r20.user.user.firstName, \" \", appointment_r20.user.user.lastName, \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 17);\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, appointment_r21.appointmentDate), \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Th\\u1EDDi gian \\u0111\\u1EB7t \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r22.appointmentTime, \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Booking Date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, appointment_r23.bookingDate), \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Reason \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r24.reason, \" \");\n  }\n}\nfunction UserAppointmentsComponent_div_1_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Status \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_25_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵtext(2, \"CANCELLED\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_25_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 21)(2, \"button\", 22);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function UserAppointmentsComponent_div_1_td_25_ng_container_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const appointment_r25 = i0.ɵɵnextContext().$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.updateStatus(appointment_r25.appointmentId, \"CANCELLED\"));\n    });\n    i0.ɵɵtext(5, \"Cancel\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const appointment_r25 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(appointment_r25.status);\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_25_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵtext(2, \"REJECTED\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction UserAppointmentsComponent_div_1_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtemplate(1, UserAppointmentsComponent_div_1_td_25_ng_container_1_Template, 3, 0, \"ng-container\", 19);\n    i0.ɵɵtemplate(2, UserAppointmentsComponent_div_1_td_25_ng_container_2_Template, 6, 1, \"ng-container\", 19);\n    i0.ɵɵtemplate(3, UserAppointmentsComponent_div_1_td_25_ng_container_3_Template, 3, 0, \"ng-container\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", appointment_r25.status === \"CANCELLED\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", appointment_r25.status !== \"CANCELLED\" && appointment_r25.status !== \"REJECTED\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", appointment_r25.status === \"REJECTED\");\n  }\n}\nfunction UserAppointmentsComponent_div_1_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 24);\n  }\n}\nfunction UserAppointmentsComponent_div_1_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\nfunction UserAppointmentsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h2\");\n    i0.ɵɵtext(2, \"L\\u1ECBch H\\u1EB9n C\\u1EE7a T\\u00F4i\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"table\", 5);\n    i0.ɵɵelementContainerStart(5, 6);\n    i0.ɵɵtemplate(6, UserAppointmentsComponent_div_1_th_6_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(7, UserAppointmentsComponent_div_1_td_7_Template, 2, 2, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(8, 9);\n    i0.ɵɵtemplate(9, UserAppointmentsComponent_div_1_th_9_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(10, UserAppointmentsComponent_div_1_td_10_Template, 2, 2, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(11, 10);\n    i0.ɵɵtemplate(12, UserAppointmentsComponent_div_1_th_12_Template, 1, 0, \"th\", 7);\n    i0.ɵɵtemplate(13, UserAppointmentsComponent_div_1_td_13_Template, 3, 3, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(14, 11);\n    i0.ɵɵtemplate(15, UserAppointmentsComponent_div_1_th_15_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(16, UserAppointmentsComponent_div_1_td_16_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(17, 12);\n    i0.ɵɵtemplate(18, UserAppointmentsComponent_div_1_th_18_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(19, UserAppointmentsComponent_div_1_td_19_Template, 3, 3, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(20, 13);\n    i0.ɵɵtemplate(21, UserAppointmentsComponent_div_1_th_21_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(22, UserAppointmentsComponent_div_1_td_22_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(23, 14);\n    i0.ɵɵtemplate(24, UserAppointmentsComponent_div_1_th_24_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(25, UserAppointmentsComponent_div_1_td_25_Template, 4, 3, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(26, UserAppointmentsComponent_div_1_tr_26_Template, 1, 0, \"tr\", 15);\n    i0.ɵɵtemplate(27, UserAppointmentsComponent_div_1_tr_27_Template, 1, 0, \"tr\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.dataSource);\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.displayedColumns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.displayedColumns);\n  }\n}\nfunction UserAppointmentsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"p\");\n    i0.ɵɵtext(2, \"No appointments found.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class UserAppointmentsComponent {\n  constructor(appointmentService) {\n    this.appointmentService = appointmentService;\n    this.appointments = [];\n    this.userId = 0;\n    this.displayedColumns = ['doctorName', 'userName', 'appointmentDate', 'appointmentTime', 'bookingDate', 'reason', 'status'];\n    this.dataSource = new MatTableDataSource();\n  }\n  ngOnInit() {\n    // To set user_id\n    let userStr = localStorage.getItem('user');\n    if (userStr) {\n      let user = JSON.parse(userStr);\n      this.userId = user.userId;\n    } else {\n      console.error('User data not found in localStorage.');\n    }\n    this.getAppointments();\n  }\n  getAppointments() {\n    this.appointmentService.getAppointmentsByUserId(this.userId).subscribe(data => {\n      this.appointments = data;\n      this.dataSource.data = this.appointments;\n    }, error => {\n      console.error(error);\n    });\n  }\n  updateStatus(appointmentId, status) {\n    this.appointmentService.updateStatus(appointmentId, status).subscribe(data => {\n      console.log('Appointment Status update:', data);\n      window.location.reload();\n      // Perform any additional actions upon success\n    }, error => {\n      console.error('Error updating appointment:', error);\n      // Handle error scenarios\n    });\n  }\n  static #_ = this.ɵfac = function UserAppointmentsComponent_Factory(t) {\n    return new (t || UserAppointmentsComponent)(i0.ɵɵdirectiveInject(i1.AppointmentService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserAppointmentsComponent,\n    selectors: [[\"app-user-appointments\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"content\"], [\"class\", \"appointments-container\", 4, \"ngIf\", \"ngIfElse\"], [\"noAppointments\", \"\"], [1, \"appointments-container\"], [1, \"table-container\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"doctorName\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"userName\"], [\"matColumnDef\", \"appointmentDate\"], [\"matColumnDef\", \"appointmentTime\"], [\"matColumnDef\", \"bookingDate\"], [\"matColumnDef\", \"reason\"], [\"matColumnDef\", \"status\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"basic\"], [1, \"statusBtn\"], [\"mat-raised-button\", \"\", \"color\", \"primary\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"noAppointments\"]],\n    template: function UserAppointmentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, UserAppointmentsComponent_div_1_Template, 28, 3, \"div\", 1);\n        i0.ɵɵtemplate(2, UserAppointmentsComponent_ng_template_2_Template, 3, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataSource.data.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i2.MatButton, i3.MatTable, i3.MatHeaderCellDef, i3.MatHeaderRowDef, i3.MatColumnDef, i3.MatCellDef, i3.MatRowDef, i3.MatHeaderCell, i3.MatCell, i3.MatHeaderRow, i3.MatRow, i4.NgIf, i4.DatePipe],\n    styles: [\".content[_ngcontent-%COMP%]{\\r\\n  padding: 0 10%;\\r\\n    padding-top: 25vh ;\\r\\n    min-height:80vh;\\r\\n    max-height: 100vh;\\r\\n}\\r\\n.noAppointments[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.noAppointments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\r\\nfont-size: 200%;\\r\\nfont-weight: 700;\\r\\n\\r\\n}\\r\\n\\r\\n.appointments-container[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n  }\\r\\n\\r\\n  .appointments-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\r\\n  color: #0072b8;\\r\\n  font-size: 30px;\\r\\n  font-weight: 700;\\r\\n  }\\r\\n  \\r\\n  .table-container[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n    width: 100%;\\r\\n    overflow-x: auto;\\r\\n    padding: 20px;\\r\\n    border-radius: 8px;\\r\\n    \\r\\n  }\\r\\n\\r\\n    .mat-mdc-table tbody, .mat-mdc-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .mat-mdc-cell[_ngcontent-%COMP%], .mat-mdc-footer-cell[_ngcontent-%COMP%], .mat-mdc-header-row[_ngcontent-%COMP%], .mat-mdc-row[_ngcontent-%COMP%], .mat-mdc-footer-row[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{\\r\\n    background-color : white;\\r\\n    color: black;\\r\\n    border-bottom: 0.1px solid grey;\\r\\n  }\\r\\n  \\r\\n  table[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    border-collapse: collapse;\\r\\n  }\\r\\n\\r\\n  .statusBtn[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    gap: 8px;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    padding: 12px 15px;\\r\\n    text-align: left;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%] {\\r\\n    background-color: #f4f4f4;\\r\\n  }\\r\\n  \\r\\n  td[_ngcontent-%COMP%] {\\r\\n    border-bottom: 1px solid #ddd;\\r\\n  }\\r\\n  \\r\\n  tr[_ngcontent-%COMP%]:nth-child(even) {\\r\\n    background-color: #f9f9f9;\\r\\n  }\\r\\n  \\r\\n  tr[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #f1f1f1;\\r\\n  }\\r\\n  \\r\\n  @media (max-width: 900px) {\\r\\n\\r\\n    .content[_ngcontent-%COMP%]{\\r\\n      padding: 0 8%;\\r\\n      padding-top: 20vh;\\r\\n\\r\\n    }\\r\\n\\r\\n    th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n      padding: 10px 8px;\\r\\n    }\\r\\n  \\r\\n    th[_ngcontent-%COMP%] {\\r\\n      font-size: 14px;\\r\\n    }\\r\\n  \\r\\n    td[_ngcontent-%COMP%] {\\r\\n      font-size: 13px;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  @media (max-width: 600px) {\\r\\n    .appointments-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\r\\n      font-size: 25px;\\r\\n    }\\r\\n    .table-container[_ngcontent-%COMP%]{\\r\\n      margin-top: 10px;\\r\\n    }\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9ub3JtYWxVc2VyL3VzZXItYXBwb2ludG1lbnRzL3VzZXItYXBwb2ludG1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixpQkFBaUI7QUFDckI7QUFDQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtBQUNyQjs7QUFFQTtBQUNBLGVBQWU7QUFDZixnQkFBZ0I7O0FBRWhCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7RUFDckI7O0VBRUE7RUFDQSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixXQUFXO0lBQ1gsZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsOENBQThDO0VBQ2hEOztFQUVBO0lBQ0Usd0JBQXdCO0lBQ3hCLFlBQVk7SUFDWiwrQkFBK0I7RUFDakM7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixRQUFRO0VBQ1Y7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsNkJBQTZCO0VBQy9COztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBOztJQUVFO01BQ0UsYUFBYTtNQUNiLGlCQUFpQjs7SUFFbkI7O0lBRUE7TUFDRSxpQkFBaUI7SUFDbkI7O0lBRUE7TUFDRSxlQUFlO0lBQ2pCOztJQUVBO01BQ0UsZUFBZTtJQUNqQjtFQUNGOztFQUVBO0lBQ0U7TUFDRSxlQUFlO0lBQ2pCO0lBQ0E7TUFDRSxnQkFBZ0I7SUFDbEI7RUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5jb250ZW50e1xyXG4gIHBhZGRpbmc6IDAgMTAlO1xyXG4gICAgcGFkZGluZy10b3A6IDI1dmggO1xyXG4gICAgbWluLWhlaWdodDo4MHZoO1xyXG4gICAgbWF4LWhlaWdodDogMTAwdmg7XHJcbn1cclxuLm5vQXBwb2ludG1lbnRze1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4ubm9BcHBvaW50bWVudHMgcHtcclxuZm9udC1zaXplOiAyMDAlO1xyXG5mb250LXdlaWdodDogNzAwO1xyXG5cclxufVxyXG5cclxuLmFwcG9pbnRtZW50cy1jb250YWluZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgLmFwcG9pbnRtZW50cy1jb250YWluZXIgaDJ7XHJcbiAgY29sb3I6ICMwMDcyYjg7XHJcbiAgZm9udC1zaXplOiAzMHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgfVxyXG4gIFxyXG4gIC50YWJsZS1jb250YWluZXIge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgb3ZlcmZsb3cteDogYXV0bztcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAvKiBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOyAqL1xyXG4gIH1cclxuXHJcbiAgOjpuZy1kZWVwIC5tYXQtbWRjLXRhYmxlIHRib2R5LCAubWF0LW1kYy10YWJsZSB0Zm9vdCwgLm1hdC1tZGMtdGFibGUgdGhlYWQsIC5tYXQtbWRjLWNlbGwsIC5tYXQtbWRjLWZvb3Rlci1jZWxsLCAubWF0LW1kYy1oZWFkZXItcm93LCAubWF0LW1kYy1yb3csIC5tYXQtbWRjLWZvb3Rlci1yb3csIC5tYXQtbWRjLXRhYmxlIC5tYXQtbWRjLWhlYWRlci1jZWxse1xyXG4gICAgYmFja2dyb3VuZC1jb2xvciA6IHdoaXRlO1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMC4xcHggc29saWQgZ3JleTtcclxuICB9XHJcbiAgXHJcbiAgdGFibGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG4gIH1cclxuXHJcbiAgLnN0YXR1c0J0bntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgZ2FwOiA4cHg7XHJcbiAgfVxyXG4gIFxyXG4gIHRoLCB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMnB4IDE1cHg7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIH1cclxuICBcclxuICB0aCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gIH1cclxuICBcclxuICB0ZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcclxuICB9XHJcbiAgXHJcbiAgdHI6bnRoLWNoaWxkKGV2ZW4pIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XHJcbiAgfVxyXG4gIFxyXG4gIHRyOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7XHJcbiAgfVxyXG4gIFxyXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkge1xyXG5cclxuICAgIC5jb250ZW50e1xyXG4gICAgICBwYWRkaW5nOiAwIDglO1xyXG4gICAgICBwYWRkaW5nLXRvcDogMjB2aDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdGgsIHRkIHtcclxuICAgICAgcGFkZGluZzogMTBweCA4cHg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB0aCB7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIH1cclxuICBcclxuICAgIHRkIHtcclxuICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBAbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcclxuICAgIC5hcHBvaW50bWVudHMtY29udGFpbmVyIGgye1xyXG4gICAgICBmb250LXNpemU6IDI1cHg7XHJcbiAgICB9XHJcbiAgICAudGFibGUtY29udGFpbmVye1xyXG4gICAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgfVxyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["MatTableDataSource","i0","UserAppointmentsComponent","constructor","appointmentService","ngOnInit","userStr","localStorage","getItem","user","JSON","parse","userId","console","error","getAppointments","getAppointmentsByUserId","subscribe","data","appointments","dataSource","updateStatus","appointmentId","status","log","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\voket\\Desktop\\Moduel2\\HealthCareSystem\\Frontend1\\Frontend\\src\\app\\components\\normalUser\\user-appointments\\user-appointments.component.ts","C:\\Users\\voket\\Desktop\\Moduel2\\HealthCareSystem\\Frontend1\\Frontend\\src\\app\\components\\normalUser\\user-appointments\\user-appointments.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { AppointmentService } from 'src/app/service/appointment.service';\r\nimport { Appointment } from '../../models/appointment.model';\r\n\r\n@Component({\r\n  selector: 'app-user-appointments',\r\n  templateUrl: './user-appointments.component.html',\r\n  styleUrls: ['./user-appointments.component.css']\r\n})\r\nexport class UserAppointmentsComponent implements OnInit {\r\n\r\n  appointments: Appointment[] = [];\r\n  userId = 0;\r\n  displayedColumns: string[] = ['doctorName', 'userName', 'appointmentDate', 'appointmentTime', 'bookingDate', 'reason', 'status'];\r\n  dataSource = new MatTableDataSource<Appointment>();\r\n\r\n  constructor(private appointmentService: AppointmentService) { }\r\n\r\n  ngOnInit(): void {\r\n    // To set user_id\r\n    let userStr: any = localStorage.getItem('user');\r\n    if (userStr) {\r\n      let user = JSON.parse(userStr);\r\n      this.userId = user.userId;\r\n    } else {\r\n      console.error('User data not found in localStorage.');\r\n    }\r\n    this.getAppointments();\r\n  }\r\n\r\n  getAppointments(): void {\r\n    this.appointmentService.getAppointmentsByUserId(this.userId).subscribe(\r\n      (data: Appointment[]) => {\r\n        this.appointments = data;\r\n        this.dataSource.data = this.appointments;\r\n      },\r\n      (error) => {\r\n        console.error(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  updateStatus(appointmentId:any, status: any): void {\r\n    this.appointmentService.updateStatus(appointmentId, status).subscribe(\r\n      (data) => {\r\n        console.log('Appointment Status update:', data);\r\n        window.location.reload();\r\n        // Perform any additional actions upon success\r\n      },\r\n      (error) => {\r\n        console.error('Error updating appointment:', error);\r\n        // Handle error scenarios\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"content\">\r\n\r\n  <div *ngIf=\"dataSource.data.length > 0; else noAppointments\" class=\"appointments-container\">\r\n    <h2>Lịch Hẹn Của Tôi</h2>\r\n    <div class=\"table-container\">\r\n      <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\">\r\n\r\n        <!-- Doctor Name Column -->\r\n        <ng-container matColumnDef=\"doctorName\">\r\n          <th mat-header-cell *matHeaderCellDef> Tên Bác Sĩ </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.doctor.user.firstName}}\r\n            {{appointment.doctor.user.lastName}} </td>\r\n        </ng-container>\r\n\r\n        <!-- User Name Column -->\r\n        <ng-container matColumnDef=\"userName\">\r\n          <th mat-header-cell *matHeaderCellDef> Tên Người Đặt </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.user.user.firstName}}\r\n            {{appointment.user.user.lastName}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Appointment Date Column -->\r\n        <ng-container matColumnDef=\"appointmentDate\">\r\n          <th mat-header-cell *matHeaderCellDef>  </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.appointmentDate | date}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Appointment Time Column -->\r\n        <ng-container matColumnDef=\"appointmentTime\">\r\n          <th mat-header-cell *matHeaderCellDef> Thời gian đặt </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.appointmentTime}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Booking Date Column -->\r\n        <ng-container matColumnDef=\"bookingDate\">\r\n          <th mat-header-cell *matHeaderCellDef> Booking Date </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.bookingDate | date}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Reason Column -->\r\n        <ng-container matColumnDef=\"reason\">\r\n          <th mat-header-cell *matHeaderCellDef> Reason </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.reason}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Status Column -->\r\n        <ng-container matColumnDef=\"status\">\r\n          <th mat-header-cell *matHeaderCellDef> Status </th>\r\n          <td mat-cell *matCellDef=\"let appointment\">\r\n            <ng-container *ngIf=\"appointment.status==='CANCELLED'\">\r\n              <button mat-raised-button color=\"basic\">CANCELLED</button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"appointment.status!=='CANCELLED' && appointment.status!=='REJECTED' \">\r\n              <div class=\"statusBtn\">\r\n                <button mat-raised-button color=\"primary\">{{appointment.status}}</button>\r\n                <button mat-raised-button color=\"accent\"\r\n                  (click)=\"updateStatus(appointment.appointmentId, 'CANCELLED')\">Cancel</button>\r\n              </div>\r\n\r\n            </ng-container>\r\n            <ng-container *ngIf=\"appointment.status==='REJECTED'\">\r\n              <button mat-raised-button color=\"basic\">REJECTED</button>\r\n            </ng-container>\r\n          </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n      </table>\r\n    </div>\r\n  </div>\r\n  <ng-template #noAppointments>\r\n<div class=\"noAppointments\">\r\n  <p>No appointments found.</p>\r\n\r\n</div>\r\n  </ng-template>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}