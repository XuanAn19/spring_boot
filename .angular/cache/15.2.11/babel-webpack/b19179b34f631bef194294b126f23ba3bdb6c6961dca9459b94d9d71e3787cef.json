{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Swal from 'sweetalert2';\nlet UserDashboardComponent = class UserDashboardComponent {\n  constructor(snack, router, doctorService, appointmentService) {\n    this.snack = snack;\n    this.router = router;\n    this.doctorService = doctorService;\n    this.appointmentService = appointmentService;\n    this.doctorSpecs = [];\n    this.appointment = {\n      doctor_id: 0,\n      user_id: 0,\n      appointmentDate: '',\n      appointmentTime: '',\n      bookingDate: Date.now(),\n      reason: ''\n    };\n  }\n  ngOnInit() {\n    this.getAllDoctorSpec();\n  }\n  getAllDoctorSpec() {\n    this.doctorService.getAllDoctorSpec().subscribe(data => {\n      this.doctorSpecs = data;\n      console.log(data);\n    }, error => {\n      console.log(error);\n    });\n  }\n  getDoctorSpecByDoctorId(doctorId) {\n    this.doctorService.getDoctorSpecializationByDoctorId(doctorId).subscribe(data => {\n      console.log(data);\n    });\n  }\n  bookAppointment() {\n    //to set user_id\n    let userStr = localStorage.getItem('user');\n    if (userStr) {\n      let user = JSON.parse(userStr);\n      this.appointment.user_id = user.userId;\n    } else {\n      console.error('User data not found in localStorage.');\n    }\n    this.appointmentService.bookAppointment(this.appointment).subscribe(data => {\n      console.log(data);\n      Swal.fire({\n        title: \"Đặt lịch hẹn thành công\",\n        text: \"Vui lòng chờ sự phê duyệt từ bác sĩ\",\n        icon: \"success\",\n        confirmButtonText: 'OK'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.router.navigate(['/userAppointments']);\n        }\n      });\n    }, error => {\n      console.log(error);\n      const snackBarRef = this.snack.open(\"Lỗi khi đặt lịch hẹn..\", 'OK', {\n        verticalPosition: 'top'\n      });\n      snackBarRef.onAction().subscribe(() => {\n        window.location.reload();\n      });\n    });\n  }\n};\nUserDashboardComponent = __decorate([Component({\n  selector: 'app-user-dashboard',\n  templateUrl: './user-dashboard.component.html',\n  styleUrls: ['./user-dashboard.component.css']\n})], UserDashboardComponent);\nexport { UserDashboardComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAKjD,OAAOC,IAAI,MAAM,aAAa;AAOvB,IAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAcjCC,YAAoBC,KAAmB,EAAUC,MAAe,EAASC,aAA4B,EAAUC,kBAAsC;IAAjI,UAAK,GAALH,KAAK;IAAwB,WAAM,GAANC,MAAM;IAAkB,kBAAa,GAAbC,aAAa;IAAyB,uBAAkB,GAAlBC,kBAAkB;IAZjI,gBAAW,GAAU,EAAE;IAEvB,gBAAW,GAAG;MACZC,SAAS,EAAE,CAAC;MACZC,OAAO,EAAE,CAAC;MACVC,eAAe,EAAE,EAAE;MACnBC,eAAe,EAAE,EAAE;MACnBC,WAAW,EAAEC,IAAI,CAACC,GAAG,EAAE;MACvBC,MAAM,EAAE;KACT;EAGwJ;EAEzJC,QAAQ;IACN,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEAA,gBAAgB;IAEd,IAAI,CAACX,aAAa,CAACW,gBAAgB,EAAE,CAACC,SAAS,CAC7CC,IAAI,IAAG;MACL,IAAI,CAACC,WAAW,GAAGD,IAAI;MACvBE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;IACnB,CAAC,EACDI,KAAK,IAAG;MACNF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;IACpB,CAAC,CACF;EACH;EAEAC,uBAAuB,CAACC,QAAa;IACnC,IAAI,CAACnB,aAAa,CAACoB,iCAAiC,CAACD,QAAQ,CAAC,CAACP,SAAS,CACtEC,IAAI,IAAG;MACLE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;IACnB,CAAC,CACF;EACH;EAEAQ,eAAe;IACb;IACA,IAAIC,OAAO,GAAQC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC/C,IAAIF,OAAO,EAAE;MACX,IAAIG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;MAC9B,IAAI,CAACM,WAAW,CAACzB,OAAO,GAAGsB,IAAI,CAACI,MAAM;KACvC,MAAM;MACLd,OAAO,CAACE,KAAK,CAAC,sCAAsC,CAAC;;IAGvD,IAAI,CAAChB,kBAAkB,CAACoB,eAAe,CAAC,IAAI,CAACO,WAAW,CAAC,CAAChB,SAAS,CACjEC,IAAI,IAAG;MACLE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;MACjBlB,IAAI,CAACmC,IAAI,CAAC;QACRC,KAAK,EAAE,yBAAyB;QAChCC,IAAI,EAAE,qCAAqC;QAC3CC,IAAI,EAAE,SAAS;QACfC,iBAAiB,EAAE;OACpB,CAAC,CAACC,IAAI,CAAEC,MAAM,IAAI;QACjB,IAAIA,MAAM,CAACC,WAAW,EAAE;UACtB,IAAI,CAACtC,MAAM,CAACuC,QAAQ,CAAC,CAAC,mBAAmB,CAAC,CAAC;;MAE/C,CAAC,CAAC;IACJ,CAAC,EACDrB,KAAK,IAAG;MACNF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;MAClB,MAAMsB,WAAW,GAAG,IAAI,CAACzC,KAAK,CAAC0C,IAAI,CAAC,wBAAwB,EAAE,IAAI,EAAE;QAClEC,gBAAgB,EAAE;OACnB,CAAC;MAEFF,WAAW,CAACG,QAAQ,EAAE,CAAC9B,SAAS,CAAC,MAAK;QACpC+B,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;MAC1B,CAAC,CAAC;IACJ,CAAC,CACF;EAEH;CAED;AA/EYjD,sBAAsB,eALlCF,SAAS,CAAC;EACToD,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,GACWpD,sBAAsB,CA+ElC;SA/EYA,sBAAsB","names":["Component","Swal","UserDashboardComponent","constructor","snack","router","doctorService","appointmentService","doctor_id","user_id","appointmentDate","appointmentTime","bookingDate","Date","now","reason","ngOnInit","getAllDoctorSpec","subscribe","data","doctorSpecs","console","log","error","getDoctorSpecByDoctorId","doctorId","getDoctorSpecializationByDoctorId","bookAppointment","userStr","localStorage","getItem","user","JSON","parse","appointment","userId","fire","title","text","icon","confirmButtonText","then","result","isConfirmed","navigate","snackBarRef","open","verticalPosition","onAction","window","location","reload","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\voket\\Desktop\\Moduel2\\HealthCareSystem\\Frontend1\\Frontend\\src\\app\\components\\normalUser\\user-dashboard\\user-dashboard.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { AppointmentService } from 'src/app/service/appointment.service';\r\nimport { DoctorService } from 'src/app/service/doctor.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-user-dashboard',\r\n  templateUrl: './user-dashboard.component.html',\r\n  styleUrls: ['./user-dashboard.component.css']\r\n})\r\nexport class UserDashboardComponent implements OnInit {\r\n\r\n  doctorSpecs: any[] = [];\r\n\r\n  appointment = {\r\n    doctor_id: 0,\r\n    user_id: 0,\r\n    appointmentDate: '',\r\n    appointmentTime: '',\r\n    bookingDate: Date.now(),\r\n    reason: ''\r\n  }\r\n\r\n\r\n  constructor(private snack : MatSnackBar ,private router : Router,private doctorService: DoctorService, private appointmentService: AppointmentService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAllDoctorSpec();\r\n  }\r\n\r\n  getAllDoctorSpec() {\r\n\r\n    this.doctorService.getAllDoctorSpec().subscribe(\r\n      data => {\r\n        this.doctorSpecs = data;\r\n        console.log(data);\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      }\r\n    )\r\n  }\r\n\r\n  getDoctorSpecByDoctorId(doctorId: any) {\r\n    this.doctorService.getDoctorSpecializationByDoctorId(doctorId).subscribe(\r\n      data => {\r\n        console.log(data);\r\n      }\r\n    )\r\n  }\r\n\r\n  bookAppointment() {\r\n    //to set user_id\r\n    let userStr: any = localStorage.getItem('user');\r\n    if (userStr) {\r\n      let user = JSON.parse(userStr);\r\n      this.appointment.user_id = user.userId;\r\n    } else {\r\n      console.error('User data not found in localStorage.');\r\n    }\r\n\r\n    this.appointmentService.bookAppointment(this.appointment).subscribe(\r\n      data => {\r\n        console.log(data);\r\n        Swal.fire({\r\n          title: \"Đặt lịch hẹn thành công\",\r\n          text: \"Vui lòng chờ sự phê duyệt từ bác sĩ\",\r\n          icon: \"success\",\r\n          confirmButtonText: 'OK',\r\n        }).then((result) => {\r\n          if (result.isConfirmed) {\r\n            this.router.navigate(['/userAppointments']);\r\n          }\r\n        });\r\n      },\r\n      error => {\r\n        console.log(error);\r\n        const snackBarRef = this.snack.open(\"Lỗi khi đặt lịch hẹn..\", 'OK', {\r\n          verticalPosition: 'top'\r\n        });\r\n    \r\n        snackBarRef.onAction().subscribe(() => {\r\n          window.location.reload();\r\n        });\r\n      }\r\n    );\r\n    \r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}