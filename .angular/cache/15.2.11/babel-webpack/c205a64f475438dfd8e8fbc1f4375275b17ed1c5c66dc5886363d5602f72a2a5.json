{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/login.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"ngx-ui-loader\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nfunction LoginComponent_span_10_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Email is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtemplate(1, LoginComponent_span_10_span_1_Template, 2, 0, \"span\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors == null ? null : _r1.errors[\"required\"]);\n  }\n}\nfunction LoginComponent_span_14_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Password is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtemplate(1, LoginComponent_span_14_span_1_Template, 2, 0, \"span\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r3 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors == null ? null : _r3.errors[\"required\"]);\n  }\n}\nexport class LoginComponent {\n  constructor(loginService, router, snack, ngxService) {\n    this.loginService = loginService;\n    this.router = router;\n    this.snack = snack;\n    this.ngxService = ngxService;\n    this.userRequest = {\n      email: '',\n      password: ''\n    };\n  }\n  loginUser() {\n    this.ngxService.start();\n    this.loginService.generateToken(this.userRequest).subscribe(response => {\n      this.ngxService.stop();\n      console.log(\"Token generated successfully\");\n      console.log(\"Token\", response);\n      this.loginService.userLogin(response.token);\n      this.loginService.getLoggedInUser().subscribe(userData => {\n        console.log(\"User ->\", userData);\n        this.loginService.setUser(userData);\n        if (this.loginService.getUserRole() == \"ADMIN\") {\n          console.log(\"Admin user\");\n          this.router.navigate(['/adminDashboard']);\n          this.loginService.loginStatusSubject.next(true);\n        } else if (this.loginService.getUserRole() == \"DOCTOR\") {\n          console.log(\"Doctor user\");\n          this.router.navigate(['/doctorDashboard']);\n          this.loginService.loginStatusSubject.next(true);\n        } else if (this.loginService.getUserRole() == \"NORMAL\") {\n          console.log(\"Normal user\");\n          this.router.navigate(['/userDashboard']);\n          this.loginService.loginStatusSubject.next(true);\n        } else {\n          this.loginService.logout();\n        }\n      });\n    }, error => {\n      console.log(\"Error while generating token\", error);\n      this.snack.open(\"Invalid Credentials\", 'ok', {\n        verticalPosition: 'top'\n      });\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.LoginService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.NgxUiLoaderService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 22,\n    vars: 5,\n    consts: [[1, \"login-page\"], [1, \"login-container\"], [\"id\", \"login\"], [3, \"submit\"], [\"loginForm\", \"ngForm\"], [1, \"input-div\"], [1, \"input-divs\"], [\"type\", \"text\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", \"placeholder\", \"Email\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Password\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"type\", \"submit\", 3, \"disabled\"], [\"id\", \"signup-link-div\"], [\"id\", \"signup-text\"], [\"id\", \"signup-link\", \"routerLink\", \"/signup\"], [2, \"color\", \"red\"], [4, \"ngIf\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3, 4);\n        i0.ɵɵlistener(\"submit\", function LoginComponent_Template_form_submit_4_listener() {\n          return ctx.loginUser();\n        });\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"input\", 7, 8);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.userRequest.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, LoginComponent_span_10_Template, 2, 1, \"span\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 6)(12, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.userRequest.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, LoginComponent_span_14_Template, 2, 1, \"span\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵtext(16, \"\\u0110\\u0103ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 13)(18, \"p\", 14);\n        i0.ɵɵtext(19, \"Not a member yet?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"a\", 15);\n        i0.ɵɵtext(21, \"Sign Up\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n        const _r1 = i0.ɵɵreference(9);\n        const _r3 = i0.ɵɵreference(13);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.userRequest.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r1.invalid && _r1.touched);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.userRequest.password);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r3.invalid && _r3.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n      }\n    },\n    dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm, i6.NgIf, i2.RouterLink],\n    styles: [\".login-page[_ngcontent-%COMP%] {\\r\\n  background-image: url(\\\"https://themewagon.github.io/medicalcenter/assets/img/hero/hero2.png\\\");\\r\\n    height:88vh;\\r\\n    padding-top: 12vh;\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n  }\\r\\n  \\r\\n  .login-container[_ngcontent-%COMP%] {\\r\\n    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\\r\\n        display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    height: 60%;\\r\\n    width: 420px;\\r\\n    border: 1px solid white;\\r\\n    border-radius: 5px;\\r\\n    background-color: white;\\r\\n  }\\r\\n  \\r\\n  #login[_ngcontent-%COMP%]{\\r\\n    font-size: 30px;\\r\\n    font-weight: 600;\\r\\n    font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\\r\\n    padding-top: 40px;\\r\\n    letter-spacing: 1.5px;\\r\\n  }\\r\\n  \\r\\n  form[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    width: 85%;\\r\\n    height: 100%;\\r\\n  }\\r\\n  \\r\\n  .input-div[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    margin-top: 10px;\\r\\n    flex-direction: column;\\r\\n    justify-content: space-evenly;\\r\\n    height: 50%;\\r\\n   }\\r\\n  \\r\\n  .input-divs[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n   }\\r\\n  \\r\\n  input[_ngcontent-%COMP%] {\\r\\n    padding: 5px 14px;\\r\\n    border: 2px solid #e4e4e4;\\r\\n    border-radius: 5px;\\r\\n    height: 40px;\\r\\n    color: #232323;\\r\\n    font-size: 15px;\\r\\n    font-weight: 500;\\r\\n    letter-spacing: 2.5px;\\r\\n  }\\r\\n  \\r\\n  \\r\\n  button[_ngcontent-%COMP%] {\\r\\n    margin-top: 5px;\\r\\n    padding:5px 14px;\\r\\n    height: 45px;\\r\\n    background-color: #42b7ff;\\r\\n    color: white;\\r\\n    border: none;\\r\\n    border-radius: 6px;\\r\\n    font-size: 15px;\\r\\n    font-weight: 500;\\r\\n    cursor: pointer;\\r\\n    transition: 0.5s all;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%]:disabled{\\r\\n    background-color: #cccccc; \\r\\n    color: #666666;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%]:hover:disabled{\\r\\n    background-color: #cccccc; \\r\\n  color: #666666;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #0ea2ff;\\r\\n  }\\r\\n  \\r\\n  #signup-link-div[_ngcontent-%COMP%]{\\r\\n    margin-top:10px;\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: center;\\r\\n  }\\r\\n  \\r\\n  #signup-text[_ngcontent-%COMP%]{\\r\\n  font-size: 15px;\\r\\n  font-weight: 500;\\r\\n  \\r\\n  }\\r\\n  \\r\\n  #signup-link[_ngcontent-%COMP%]{\\r\\n  font-size: 15px;\\r\\n  font-weight: 500;\\r\\n  color: orangered;\\r\\n  margin-left: 10px;\\r\\n  \\r\\n  }\\r\\n  \\r\\n  \\r\\n@media (max-width: 600px) {\\r\\n  .login-page[_ngcontent-%COMP%] {\\r\\n      height:82vh;\\r\\n      padding-top: 8vh;\\r\\n    }\\r\\n\\r\\n  .login-container[_ngcontent-%COMP%] {\\r\\n    width: 90%;\\r\\n    height: 55%;\\r\\n  }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QjtFQUNFLDZGQUE2RjtJQUMzRixXQUFXO0lBQ1gsaUJBQWlCO0lBQ2pCLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLHFEQUFxRDtRQUNqRCxhQUFhO0lBQ2pCLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsV0FBVztJQUNYLFlBQVk7SUFDWix1QkFBdUI7SUFDdkIsa0JBQWtCO0lBQ2xCLHVCQUF1QjtFQUN6Qjs7RUFFQTtJQUNFLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsb0dBQW9HO0lBQ3BHLGlCQUFpQjtJQUNqQixxQkFBcUI7RUFDdkI7O0VBRUE7SUFDRSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLFVBQVU7SUFDVixZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLHNCQUFzQjtJQUN0Qiw2QkFBNkI7SUFDN0IsV0FBVztHQUNaOztFQUVEO0lBQ0UsYUFBYTtJQUNiLHNCQUFzQjtHQUN2Qjs7RUFFRDtJQUNFLGlCQUFpQjtJQUNqQix5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixjQUFjO0lBQ2QsZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixxQkFBcUI7RUFDdkI7OztFQUdBO0lBQ0UsZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1oseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLG9CQUFvQjtFQUN0QjtFQUNBO0lBQ0UseUJBQXlCLEVBQUUsZUFBZTtJQUMxQyxjQUFjO0VBQ2hCO0VBQ0E7SUFDRSx5QkFBeUIsRUFBRSxlQUFlO0VBQzVDLGNBQWM7RUFDZDtFQUNBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsZUFBZTtFQUNqQixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2Qjs7RUFFQTtFQUNBLGVBQWU7RUFDZixnQkFBZ0I7O0VBRWhCOztFQUVBO0VBQ0EsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsaUJBQWlCOztFQUVqQjs7O0FBR0Y7RUFDRTtNQUNJLFdBQVc7TUFDWCxnQkFBZ0I7SUFDbEI7O0VBRUY7SUFDRSxVQUFVO0lBQ1YsV0FBVztFQUNiO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiB1c2VyLWxvZ2luLmNvbXBvbmVudC5jc3MgKi9cclxuLmxvZ2luLXBhZ2Uge1xyXG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImh0dHBzOi8vdGhlbWV3YWdvbi5naXRodWIuaW8vbWVkaWNhbGNlbnRlci9hc3NldHMvaW1nL2hlcm8vaGVybzIucG5nXCIpO1xyXG4gICAgaGVpZ2h0Ojg4dmg7XHJcbiAgICBwYWRkaW5nLXRvcDogMTJ2aDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIH1cclxuICBcclxuICAubG9naW4tY29udGFpbmVyIHtcclxuICAgIGJveC1zaGFkb3c6IHJnYmEoMTAwLCAxMDAsIDExMSwgMC4yKSAwcHggN3B4IDI5cHggMHB4O1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGhlaWdodDogNjAlO1xyXG4gICAgd2lkdGg6IDQyMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICB9XHJcbiAgXHJcbiAgI2xvZ2lue1xyXG4gICAgZm9udC1zaXplOiAzMHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGZvbnQtZmFtaWx5OidUcmVidWNoZXQgTVMnLCAnTHVjaWRhIFNhbnMgVW5pY29kZScsICdMdWNpZGEgR3JhbmRlJywgJ0x1Y2lkYSBTYW5zJywgQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgICBwYWRkaW5nLXRvcDogNDBweDtcclxuICAgIGxldHRlci1zcGFjaW5nOiAxLjVweDtcclxuICB9XHJcbiAgXHJcbiAgZm9ybSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIHdpZHRoOiA4NSU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgfVxyXG4gIFxyXG4gIC5pbnB1dC1kaXZ7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcclxuICAgIGhlaWdodDogNTAlO1xyXG4gICB9XHJcbiAgXHJcbiAgLmlucHV0LWRpdnN7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgfVxyXG4gIFxyXG4gIGlucHV0IHtcclxuICAgIHBhZGRpbmc6IDVweCAxNHB4O1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgI2U0ZTRlNDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGhlaWdodDogNDBweDtcclxuICAgIGNvbG9yOiAjMjMyMzIzO1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGxldHRlci1zcGFjaW5nOiAyLjVweDtcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgYnV0dG9uIHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIHBhZGRpbmc6NXB4IDE0cHg7XHJcbiAgICBoZWlnaHQ6IDQ1cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDJiN2ZmO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHRyYW5zaXRpb246IDAuNXMgYWxsO1xyXG4gIH1cclxuICBidXR0b246ZGlzYWJsZWR7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjY2NjOyAvKiBMaWdodCBncmF5ICovXHJcbiAgICBjb2xvcjogIzY2NjY2NjtcclxuICB9XHJcbiAgYnV0dG9uOmhvdmVyOmRpc2FibGVke1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NjY2NjYzsgLyogTGlnaHQgZ3JheSAqL1xyXG4gIGNvbG9yOiAjNjY2NjY2O1xyXG4gIH1cclxuICBidXR0b246aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzBlYTJmZjtcclxuICB9XHJcbiAgXHJcbiAgI3NpZ251cC1saW5rLWRpdntcclxuICAgIG1hcmdpbi10b3A6MTBweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gICNzaWdudXAtdGV4dHtcclxuICBmb250LXNpemU6IDE1cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBcclxuICB9XHJcbiAgXHJcbiAgI3NpZ251cC1saW5re1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIGNvbG9yOiBvcmFuZ2VyZWQ7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbiAgXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG5AbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcclxuICAubG9naW4tcGFnZSB7XHJcbiAgICAgIGhlaWdodDo4MnZoO1xyXG4gICAgICBwYWRkaW5nLXRvcDogOHZoO1xyXG4gICAgfVxyXG5cclxuICAubG9naW4tY29udGFpbmVyIHtcclxuICAgIHdpZHRoOiA5MCU7XHJcbiAgICBoZWlnaHQ6IDU1JTtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":";;;;;;;;;IAWcA,4BAAyC;IAAAA,kCAAkB;IAAAA,iBAAO;;;;;IADpEA,gCAAiE;IAC/DA,0EAAkE;IACpEA,iBAAO;;;;;IADEA,eAAgC;IAAhCA,yEAAgC;;;;;IAOvCA,4BAA4C;IAAAA,qCAAqB;IAAAA,iBAAO;;;;;IAD1EA,gCAAuE;IACrEA,0EAAwE;IAC1EA,iBAAO;;;;;IADEA,eAAmC;IAAnCA,yEAAmC;;;ACPxD,OAAM,MAAOC,cAAc;EAQzBC,YAAoBC,YAA0B,EAAUC,MAAa,EAAUC,KAAkB,EAAUC,UAA8B;IAArH,iBAAY,GAAZH,YAAY;IAAwB,WAAM,GAANC,MAAM;IAAiB,UAAK,GAALC,KAAK;IAAuB,eAAU,GAAVC,UAAU;IANrH,gBAAW,GAAG;MACZC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE;KACX;EAG0I;EAE3IC,SAAS;IACP,IAAI,CAACH,UAAU,CAACI,KAAK,EAAE;IACvB,IAAI,CAACP,YAAY,CAACQ,aAAa,CAAC,IAAI,CAACC,WAAW,CAAC,CAACC,SAAS,CAExDC,QAAa,IAAG;MACf,IAAI,CAACR,UAAU,CAACS,IAAI,EAAE;MACtBC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC3CD,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEH,QAAQ,CAAC;MAE9B,IAAI,CAACX,YAAY,CAACe,SAAS,CAACJ,QAAQ,CAACK,KAAK,CAAC;MAE3C,IAAI,CAAChB,YAAY,CAACiB,eAAe,EAAE,CAACP,SAAS,CAC3CQ,QAAQ,IAAE;QACRL,OAAO,CAACC,GAAG,CAAC,SAAS,EAACI,QAAQ,CAAC;QAC/B,IAAI,CAAClB,YAAY,CAACmB,OAAO,CAACD,QAAQ,CAAC;QAEnC,IAAG,IAAI,CAAClB,YAAY,CAACoB,WAAW,EAAE,IAAI,OAAO,EAAC;UAC5CP,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;UACzB,IAAI,CAACb,MAAM,CAACoB,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC;UACzC,IAAI,CAACrB,YAAY,CAACsB,kBAAkB,CAACC,IAAI,CAAC,IAAI,CAAC;SAChD,MACI,IAAG,IAAI,CAACvB,YAAY,CAACoB,WAAW,EAAE,IAAI,QAAQ,EAAC;UAClDP,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;UAE1B,IAAI,CAACb,MAAM,CAACoB,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC;UAC1C,IAAI,CAACrB,YAAY,CAACsB,kBAAkB,CAACC,IAAI,CAAC,IAAI,CAAC;SAChD,MACI,IAAG,IAAI,CAACvB,YAAY,CAACoB,WAAW,EAAE,IAAI,QAAQ,EAAC;UAClDP,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;UAC1B,IAAI,CAACb,MAAM,CAACoB,QAAQ,CAAC,CAAC,gBAAgB,CAAC,CAAC;UACxC,IAAI,CAACrB,YAAY,CAACsB,kBAAkB,CAACC,IAAI,CAAC,IAAI,CAAC;SAChD,MACG;UACF,IAAI,CAACvB,YAAY,CAACwB,MAAM,EAAE;;MAE9B,CAAC,CAEF;IACH,CAAC,EACDC,KAAK,IAAG;MACNZ,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEW,KAAK,CAAC;MAClD,IAAI,CAACvB,KAAK,CAACwB,IAAI,CAAC,qBAAqB,EAAC,IAAI,EAAC;QACzCC,gBAAgB,EAAC;OAClB,CAAC;IAAO,CAAC,CAEb;EAEH;EAAC;qBAzDU7B,cAAc;EAAA;EAAA;UAAdA,cAAc;IAAA8B;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QDT3BnC,8BAAwB;QAGHA,qBAAK;QAAAA,iBAAK;QACzBA,kCAAiD;QAAvBA;UAAA,OAAUoC,eAAW;QAAA,EAAC;QAC9CpC,8BAAuB;QAEWA;UAAA;QAAA,EAA+B;QAA7DA,iBAAyH;QACzHA,mEAEO;QACTA,iBAAM;QAENA,+BAAwB;QACeA;UAAA;QAAA,EAAkC;QAAvEA,iBAA4I;QAC5IA,mEAEO;QACTA,iBAAM;QAGRA,mCAAqD;QAAAA,+BAAI;QAAAA,iBAAS;QAClEA,gCAA0B;QACJA,kCAAiB;QAAAA,iBAAI;QACzCA,8BAAyC;QAAAA,wBAAO;QAAAA,iBAAI;;;;;;QAjBpBA,eAA+B;QAA/BA,+CAA+B;QACtDA,eAAoC;QAApCA,iDAAoC;QAMNA,eAAkC;QAAlCA,kDAAkC;QAChEA,eAA0C;QAA1CA,iDAA0C;QAM7CA,eAA8B;QAA9BA,sCAA8B","names":["i0","LoginComponent","constructor","loginService","router","snack","ngxService","email","password","loginUser","start","generateToken","userRequest","subscribe","response","stop","console","log","userLogin","token","getLoggedInUser","userData","setUser","getUserRole","navigate","loginStatusSubject","next","logout","error","open","verticalPosition","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\HealthCareSystem\\Frontend\\src\\app\\components\\login\\login.component.html","C:\\HealthCareSystem\\Frontend\\src\\app\\components\\login\\login.component.ts"],"sourcesContent":["\r\n<!-- user-login.component.html -->\r\n<div class=\"login-page\">\r\n    <div class=\"login-container\">\r\n  \r\n      <h2 id=\"login\">Login</h2>\r\n      <form #loginForm=\"ngForm\" (submit)=\"loginUser()\">\r\n        <div class=\"input-div\">\r\n          <div class=\"input-divs\">\r\n            <input type=\"text\" id=\"email\" [(ngModel)]=\"userRequest.email\" #email=\"ngModel\" name=\"email\" required placeholder=\"Email\">\r\n            <span *ngIf=\"email.invalid && email.touched\" style=\"color: red;\">\r\n              <span *ngIf=\"email.errors?.['required']\">Email is required.</span>\r\n            </span>\r\n          </div>\r\n        \r\n          <div class=\"input-divs\">\r\n            <input type=\"password\" id=\"password\" [(ngModel)]=\"userRequest.password\" #password=\"ngModel\" name=\"password\" required placeholder=\"Password\">\r\n            <span *ngIf=\"password.invalid && password.touched\" style=\"color: red;\">\r\n              <span *ngIf=\"password.errors?.['required']\">Password is required.</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <button [disabled]=\"loginForm.invalid\" type=\"submit\">Đăng</button>\r\n        <div id=\"signup-link-div\">\r\n          <p id=\"signup-text\">Not a member yet?</p>\r\n          <a id=\"signup-link\" routerLink=\"/signup\">Sign Up</a>\r\n        </div>\r\n      </form>\r\n      \r\n    </div>\r\n  </div>\r\n  \r\n  \r\n  <!-- <a href=\"{{url}}\" >Sign in with Google</a> -->","import { Component } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Router } from '@angular/router';\r\nimport { LoginService } from 'src/app/service/login.service';\r\nimport { NgxUiLoaderService } from \"ngx-ui-loader\"; // Import NgxUiLoaderService\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent {\r\n\r\n  userRequest = {\r\n    email: '',\r\n    password: ''\r\n  };\r\n\r\n\r\n  constructor(private loginService: LoginService, private router:Router, private snack: MatSnackBar, private ngxService: NgxUiLoaderService){}\r\n\r\n  loginUser(){\r\n    this.ngxService.start();\r\n    this.loginService.generateToken(this.userRequest).subscribe(\r\n\r\n      (response :any)=>{\r\n        this.ngxService.stop();\r\n        console.log(\"Token generated successfully\");\r\n        console.log(\"Token\", response);\r\n\r\n        this.loginService.userLogin(response.token);\r\n\r\n        this.loginService.getLoggedInUser().subscribe(\r\n          userData=>{\r\n            console.log(\"User ->\",userData);\r\n            this.loginService.setUser(userData);\r\n\r\n            if(this.loginService.getUserRole() == \"ADMIN\"){\r\n              console.log(\"Admin user\")\r\n              this.router.navigate(['/adminDashboard']);\r\n              this.loginService.loginStatusSubject.next(true);\r\n            }\r\n            else if(this.loginService.getUserRole() == \"DOCTOR\"){\r\n              console.log(\"Doctor user\")\r\n\r\n              this.router.navigate(['/doctorDashboard']);\r\n              this.loginService.loginStatusSubject.next(true);\r\n            }\r\n            else if(this.loginService.getUserRole() == \"NORMAL\"){\r\n              console.log(\"Normal user\")\r\n              this.router.navigate(['/userDashboard']);\r\n              this.loginService.loginStatusSubject.next(true);\r\n            }\r\n            else{\r\n              this.loginService.logout();\r\n            }\r\n          }\r\n\r\n        );\r\n      },\r\n      error =>{\r\n        console.log(\"Error while generating token\", error);\r\n        this.snack.open(\"Invalid Credentials\",'ok',{\r\n          verticalPosition:'top'\r\n        });      }\r\n\r\n    );\r\n   \r\n  }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}