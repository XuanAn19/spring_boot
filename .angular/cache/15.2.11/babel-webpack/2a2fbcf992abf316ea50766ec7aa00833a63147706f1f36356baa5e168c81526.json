{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/appointment.service\";\nimport * as i2 from \"@angular/material/button\";\nimport * as i3 from \"@angular/material/table\";\nimport * as i4 from \"@angular/common\";\nfunction DoctorAppointmentsComponent_div_1_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" T\\u00EAn B\\u1EC7nh Nh\\u00E2n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", appointment_r19.user.user.firstName, \" \", appointment_r19.user.user.lastName, \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Email B\\u1EC7nh Nh\\u00E2n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r20.user.user.email, \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Ng\\u00E0y H\\u1EB9n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, appointment_r21.appointmentDate), \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Th\\u1EDDi Gian H\\u1EB9n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r22.appointmentTime, \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Ng\\u00E0y \\u0110\\u1EB7t L\\u1ECBch \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, appointment_r23.bookingDate), \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" L\\u00FD Do \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r24.reason, \" \");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 17);\n    i0.ɵɵtext(1, \" Tr\\u1EA1ng Th\\u00E1i \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_25_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function DoctorAppointmentsComponent_div_1_td_25_ng_container_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const appointment_r25 = i0.ɵɵnextContext().$implicit;\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.updateStatus(appointment_r25.appointmentId, \"ACCEPTED\"));\n    });\n    i0.ɵɵtext(2, \"Ch\\u1EA5p Nh\\u1EADp\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DoctorAppointmentsComponent_div_1_td_25_ng_container_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const appointment_r25 = i0.ɵɵnextContext().$implicit;\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r31.updateStatus(appointment_r25.appointmentId, \"REJECTED\"));\n    });\n    i0.ɵɵtext(4, \"T\\u1EEB Ch\\u1ED1i\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_25_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 22);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const appointment_r25 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(appointment_r25.status);\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 18);\n    i0.ɵɵtemplate(1, DoctorAppointmentsComponent_div_1_td_25_ng_container_1_Template, 5, 0, \"ng-container\", 19);\n    i0.ɵɵtemplate(2, DoctorAppointmentsComponent_div_1_td_25_ng_container_2_Template, 3, 1, \"ng-container\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", appointment_r25.status === \"PENDING\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", appointment_r25.status !== \"PENDING\");\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 23);\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 24);\n  }\n}\nfunction DoctorAppointmentsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h2\");\n    i0.ɵɵtext(2, \"L\\u1ECBch H\\u1EB9n B\\u00E1c S\\u0129\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"table\", 5);\n    i0.ɵɵelementContainerStart(5, 6);\n    i0.ɵɵtemplate(6, DoctorAppointmentsComponent_div_1_th_6_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(7, DoctorAppointmentsComponent_div_1_td_7_Template, 2, 2, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(8, 9);\n    i0.ɵɵtemplate(9, DoctorAppointmentsComponent_div_1_th_9_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(10, DoctorAppointmentsComponent_div_1_td_10_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(11, 10);\n    i0.ɵɵtemplate(12, DoctorAppointmentsComponent_div_1_th_12_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(13, DoctorAppointmentsComponent_div_1_td_13_Template, 3, 3, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(14, 11);\n    i0.ɵɵtemplate(15, DoctorAppointmentsComponent_div_1_th_15_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(16, DoctorAppointmentsComponent_div_1_td_16_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(17, 12);\n    i0.ɵɵtemplate(18, DoctorAppointmentsComponent_div_1_th_18_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(19, DoctorAppointmentsComponent_div_1_td_19_Template, 3, 3, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(20, 13);\n    i0.ɵɵtemplate(21, DoctorAppointmentsComponent_div_1_th_21_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(22, DoctorAppointmentsComponent_div_1_td_22_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(23, 14);\n    i0.ɵɵtemplate(24, DoctorAppointmentsComponent_div_1_th_24_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(25, DoctorAppointmentsComponent_div_1_td_25_Template, 3, 2, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(26, DoctorAppointmentsComponent_div_1_tr_26_Template, 1, 0, \"tr\", 15);\n    i0.ɵɵtemplate(27, DoctorAppointmentsComponent_div_1_tr_27_Template, 1, 0, \"tr\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.dataSource);\n    i0.ɵɵadvance(22);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.displayedColumns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.displayedColumns);\n  }\n}\nfunction DoctorAppointmentsComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"h2\");\n    i0.ɵɵtext(2, \"Kh\\u00F4ng t\\u00ECm th\\u1EA5y cu\\u1ED9c h\\u1EB9n n\\u00E0o.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class DoctorAppointmentsComponent {\n  constructor(appointmentService) {\n    this.appointmentService = appointmentService;\n    this.appointments = [];\n    this.doctorId = 0;\n    this.displayedColumns = ['userName', 'userEmail', 'appointmentDate', 'appointmentTime', 'bookingDate', 'reason', 'status'];\n    this.dataSource = new MatTableDataSource();\n  }\n  ngOnInit() {\n    // To set user_id\n    let userStr = localStorage.getItem('user');\n    if (userStr) {\n      let user = JSON.parse(userStr);\n      this.doctorId = user.userId;\n    } else {\n      console.error('Dữ liệu người dùng không tìm thấy trong localStorage.');\n    }\n    this.getAppointments();\n  }\n  getAppointments() {\n    this.appointmentService.getAppointmentsByDoctorId(this.doctorId).subscribe(data => {\n      this.appointments = data;\n      this.dataSource.data = this.appointments;\n    }, error => {\n      console.error(error);\n    });\n  }\n  updateStatus(appointmentId, status) {\n    this.appointmentService.updateStatus(appointmentId, status).subscribe(data => {\n      console.log('Cập nhật tình trạng cuộc hẹn:', data);\n      window.location.reload();\n      alert(\"Trạng thái đã được cập nhật.\");\n      // Perform any additional actions upon success\n    }, error => {\n      console.error('Lỗi cập nhật cuộc hẹn:', error);\n      alert(\"Lỗi cập nhật cuộc hẹn\");\n      // Handle error scenarios\n    });\n  }\n  static #_ = this.ɵfac = function DoctorAppointmentsComponent_Factory(t) {\n    return new (t || DoctorAppointmentsComponent)(i0.ɵɵdirectiveInject(i1.AppointmentService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DoctorAppointmentsComponent,\n    selectors: [[\"app-doctor-appointments\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"content\"], [\"class\", \"appointments-container\", 4, \"ngIf\", \"ngIfElse\"], [\"noAppointments\", \"\"], [1, \"appointments-container\"], [1, \"table-container\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"userName\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"userEmail\"], [\"matColumnDef\", \"appointmentDate\"], [\"matColumnDef\", \"appointmentTime\"], [\"matColumnDef\", \"bookingDate\"], [\"matColumnDef\", \"reason\"], [\"matColumnDef\", \"status\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"basic\", 2, \"background-color\", \"#f0f0f0\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"noAppointments\"]],\n    template: function DoctorAppointmentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, DoctorAppointmentsComponent_div_1_Template, 28, 3, \"div\", 1);\n        i0.ɵɵtemplate(2, DoctorAppointmentsComponent_ng_template_2_Template, 3, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataSource.data.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i2.MatButton, i3.MatTable, i3.MatHeaderCellDef, i3.MatHeaderRowDef, i3.MatColumnDef, i3.MatCellDef, i3.MatRowDef, i3.MatHeaderCell, i3.MatCell, i3.MatHeaderRow, i3.MatRow, i4.NgIf, i4.DatePipe],\n    styles: [\".content[_ngcontent-%COMP%] {\\r\\n    padding-top: 15vh;\\r\\n    height: 85vh;\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    justify-content: center;\\r\\n    align-items: flex-start;\\r\\n    background-image: url(\\\"https://themewagon.github.io/medicalcenter/assets/img/hero/hero2.png\\\");\\r\\n  }\\r\\n\\r\\n  h2[_ngcontent-%COMP%]{\\r\\n    font-size: 30px;\\r\\n    font-weight: 700;\\r\\n  }\\r\\n\\r\\n  .appointments-container[_ngcontent-%COMP%] {\\r\\n    margin-top: 50px;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    width: 80%;\\r\\n  }\\r\\n\\r\\n  .table-container[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n    width: 100%;\\r\\n    overflow-x: auto;\\r\\n    padding: 20px;\\r\\n    border-radius: 8px;\\r\\n    \\r\\n  }\\r\\n\\r\\n    .mat-mdc-table tbody, .mat-mdc-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .mat-mdc-cell[_ngcontent-%COMP%], .mat-mdc-footer-cell[_ngcontent-%COMP%], .mat-mdc-header-row[_ngcontent-%COMP%], .mat-mdc-row[_ngcontent-%COMP%], .mat-mdc-footer-row[_ngcontent-%COMP%], .mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{\\r\\n    background-color : white;\\r\\n    color: black;\\r\\n    border-bottom: 0.1px solid grey;\\r\\n  }\\r\\n  \\r\\n  table[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    border-collapse: collapse;\\r\\n  }\\r\\n\\r\\n #buttons[_ngcontent-%COMP%]{\\r\\n    margin-left: 10px;\\r\\n } \\r\\n\\r\\n  .statusBtn[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    gap: 8px;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    padding: 12px 15px;\\r\\n    text-align: left;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%] {\\r\\n    background-color: #f4f4f4;\\r\\n  }\\r\\n  \\r\\n  td[_ngcontent-%COMP%] {\\r\\n    border-bottom: 1px solid #ddd;\\r\\n  }\\r\\n  \\r\\n  tr[_ngcontent-%COMP%]:nth-child(even) {\\r\\n    background-color: #f9f9f9;\\r\\n  }\\r\\n  \\r\\n  tr[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #f1f1f1;\\r\\n  }\\r\\n  \\r\\n  @media (max-width: 900px) {\\r\\n\\r\\n  \\r\\n\\r\\n    .appointments-container[_ngcontent-%COMP%]{\\r\\n        width: 100%;\\r\\n\\r\\n    }\\r\\n\\r\\n    .content[_ngcontent-%COMP%]{\\r\\n      padding: 20vh 8%;\\r\\n    }\\r\\n\\r\\n    th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n      padding: 10px 8px;\\r\\n    }\\r\\n  \\r\\n    th[_ngcontent-%COMP%] {\\r\\n      font-size: 14px;\\r\\n    }\\r\\n  \\r\\n    td[_ngcontent-%COMP%] {\\r\\n      font-size: 13px;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  @media (max-width: 600px) {\\r\\n    .content[_ngcontent-%COMP%] {\\r\\n      padding-top: 20vh;\\r\\n      height: 60vh;\\r\\n    }\\r\\n    .appointments-container[_ngcontent-%COMP%]{\\r\\n        margin-top: 10px;\\r\\n    }\\r\\n    .appointments-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\r\\n      font-size: 25px;\\r\\n    }\\r\\n    .table-container[_ngcontent-%COMP%]{\\r\\n      margin-top: 10px;\\r\\n    }\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kb2N0b3IvZG9jdG9yLWFwcG9pbnRtZW50cy9kb2N0b3ItYXBwb2ludG1lbnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxpQkFBaUI7SUFDakIsWUFBWTtJQUNaLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLHVCQUF1QjtJQUN2Qiw2RkFBNkY7RUFDL0Y7O0VBRUE7SUFDRSxlQUFlO0lBQ2YsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLFVBQVU7RUFDWjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixXQUFXO0lBQ1gsZ0JBQWdCO0lBQ2hCLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsOENBQThDO0VBQ2hEOztFQUVBO0lBQ0Usd0JBQXdCO0lBQ3hCLFlBQVk7SUFDWiwrQkFBK0I7RUFDakM7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0VBQzNCOztDQUVEO0lBQ0csaUJBQWlCO0NBQ3BCOztFQUVDO0lBQ0UsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQixRQUFRO0VBQ1Y7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsZ0JBQWdCO0VBQ2xCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UsNkJBQTZCO0VBQy9COztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0UseUJBQXlCO0VBQzNCOztFQUVBOzs7O0lBSUU7UUFDSSxXQUFXOztJQUVmOztJQUVBO01BQ0UsZ0JBQWdCO0lBQ2xCOztJQUVBO01BQ0UsaUJBQWlCO0lBQ25COztJQUVBO01BQ0UsZUFBZTtJQUNqQjs7SUFFQTtNQUNFLGVBQWU7SUFDakI7RUFDRjs7RUFFQTtJQUNFO01BQ0UsaUJBQWlCO01BQ2pCLFlBQVk7SUFDZDtJQUNBO1FBQ0ksZ0JBQWdCO0lBQ3BCO0lBQ0E7TUFDRSxlQUFlO0lBQ2pCO0lBQ0E7TUFDRSxnQkFBZ0I7SUFDbEI7RUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5jb250ZW50IHtcclxuICAgIHBhZGRpbmctdG9wOiAxNXZoO1xyXG4gICAgaGVpZ2h0OiA4NXZoO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiaHR0cHM6Ly90aGVtZXdhZ29uLmdpdGh1Yi5pby9tZWRpY2FsY2VudGVyL2Fzc2V0cy9pbWcvaGVyby9oZXJvMi5wbmdcIik7XHJcbiAgfVxyXG5cclxuICBoMntcclxuICAgIGZvbnQtc2l6ZTogMzBweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgfVxyXG5cclxuICAuYXBwb2ludG1lbnRzLWNvbnRhaW5lciB7XHJcbiAgICBtYXJnaW4tdG9wOiA1MHB4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgd2lkdGg6IDgwJTtcclxuICB9XHJcblxyXG4gIC50YWJsZS1jb250YWluZXIge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgb3ZlcmZsb3cteDogYXV0bztcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICAvKiBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOyAqL1xyXG4gIH1cclxuXHJcbiAgOjpuZy1kZWVwIC5tYXQtbWRjLXRhYmxlIHRib2R5LCAubWF0LW1kYy10YWJsZSB0Zm9vdCwgLm1hdC1tZGMtdGFibGUgdGhlYWQsIC5tYXQtbWRjLWNlbGwsIC5tYXQtbWRjLWZvb3Rlci1jZWxsLCAubWF0LW1kYy1oZWFkZXItcm93LCAubWF0LW1kYy1yb3csIC5tYXQtbWRjLWZvb3Rlci1yb3csIC5tYXQtbWRjLXRhYmxlIC5tYXQtbWRjLWhlYWRlci1jZWxse1xyXG4gICAgYmFja2dyb3VuZC1jb2xvciA6IHdoaXRlO1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMC4xcHggc29saWQgZ3JleTtcclxuICB9XHJcbiAgXHJcbiAgdGFibGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG4gIH1cclxuXHJcbiAjYnV0dG9uc3tcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gfSBcclxuXHJcbiAgLnN0YXR1c0J0bntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgZ2FwOiA4cHg7XHJcbiAgfVxyXG4gIFxyXG4gIHRoLCB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMnB4IDE1cHg7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIH1cclxuICBcclxuICB0aCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gIH1cclxuICBcclxuICB0ZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcclxuICB9XHJcbiAgXHJcbiAgdHI6bnRoLWNoaWxkKGV2ZW4pIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XHJcbiAgfVxyXG4gIFxyXG4gIHRyOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWYxZjE7XHJcbiAgfVxyXG4gIFxyXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkge1xyXG5cclxuICBcclxuXHJcbiAgICAuYXBwb2ludG1lbnRzLWNvbnRhaW5lcntcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLmNvbnRlbnR7XHJcbiAgICAgIHBhZGRpbmc6IDIwdmggOCU7XHJcbiAgICB9XHJcblxyXG4gICAgdGgsIHRkIHtcclxuICAgICAgcGFkZGluZzogMTBweCA4cHg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB0aCB7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIH1cclxuICBcclxuICAgIHRkIHtcclxuICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBAbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHtcclxuICAgIC5jb250ZW50IHtcclxuICAgICAgcGFkZGluZy10b3A6IDIwdmg7XHJcbiAgICAgIGhlaWdodDogNjB2aDtcclxuICAgIH1cclxuICAgIC5hcHBvaW50bWVudHMtY29udGFpbmVye1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICB9XHJcbiAgICAuYXBwb2ludG1lbnRzLWNvbnRhaW5lciBoMntcclxuICAgICAgZm9udC1zaXplOiAyNXB4O1xyXG4gICAgfVxyXG4gICAgLnRhYmxlLWNvbnRhaW5lcntcclxuICAgICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIH1cclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["MatTableDataSource","i0","DoctorAppointmentsComponent","constructor","appointmentService","ngOnInit","userStr","localStorage","getItem","user","JSON","parse","doctorId","userId","console","error","getAppointments","getAppointmentsByDoctorId","subscribe","data","appointments","dataSource","updateStatus","appointmentId","status","log","window","location","reload","alert","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\voket\\Desktop\\Moduel2\\HealthCareSystem\\Frontend1\\Frontend\\src\\app\\components\\doctor\\doctor-appointments\\doctor-appointments.component.ts","C:\\Users\\voket\\Desktop\\Moduel2\\HealthCareSystem\\Frontend1\\Frontend\\src\\app\\components\\doctor\\doctor-appointments\\doctor-appointments.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { AppointmentService } from 'src/app/service/appointment.service';\r\nimport { Appointment } from '../../models/appointment.model';\r\n\r\n@Component({\r\n  selector: 'app-doctor-appointments',\r\n  templateUrl: './doctor-appointments.component.html',\r\n  styleUrls: ['./doctor-appointments.component.css']\r\n})\r\nexport class DoctorAppointmentsComponent {\r\n\r\n\r\n  appointments: Appointment[] = [];\r\n  doctorId = 0;\r\n  displayedColumns: string[] = ['userName', 'userEmail', 'appointmentDate', 'appointmentTime', 'bookingDate', 'reason', 'status'];\r\n  dataSource = new MatTableDataSource<Appointment>();\r\n\r\n  constructor(private appointmentService: AppointmentService) { }\r\n\r\n  ngOnInit(): void {\r\n   // To set user_id\r\n   let userStr: any = localStorage.getItem('user');\r\n   if (userStr) {\r\n     let user = JSON.parse(userStr);\r\n     this.doctorId = user.userId;\r\n   } else {\r\n     console.error('Dữ liệu người dùng không tìm thấy trong localStorage.');\r\n   }\r\n   this.getAppointments();\r\n  }\r\n\r\n  getAppointments(): void {\r\n    this.appointmentService.getAppointmentsByDoctorId(this.doctorId).subscribe(\r\n      (data: Appointment[]) => {\r\n        this.appointments = data;\r\n        this.dataSource.data = this.appointments;\r\n      },\r\n      (error) => {\r\n        console.error(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  updateStatus(appointmentId:any, status: any): void {\r\n    this.appointmentService.updateStatus(appointmentId, status).subscribe(\r\n      (data) => {\r\n        console.log('Cập nhật tình trạng cuộc hẹn:', data);\r\n        \r\n        window.location.reload();\r\n        alert(\"Trạng thái đã được cập nhật.\")\r\n        // Perform any additional actions upon success\r\n      },\r\n      (error) => {\r\n        console.error('Lỗi cập nhật cuộc hẹn:', error);\r\n        alert(\"Lỗi cập nhật cuộc hẹn\");\r\n        // Handle error scenarios\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n  \r\n}\r\n","<div class=\"content\">\r\n\r\n  <div *ngIf=\"dataSource.data.length > 0; else noAppointments\" class=\"appointments-container\">\r\n    <h2>Lịch Hẹn Bác Sĩ</h2>\r\n    <div class=\"table-container\">\r\n      <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z8\">\r\n\r\n        <!-- User Name Column -->\r\n        <ng-container matColumnDef=\"userName\">\r\n          <th mat-header-cell *matHeaderCellDef> Tên Bệnh Nhân </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.user.user.firstName}} {{appointment.user.user.lastName}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Doctor Name Column -->\r\n        <ng-container matColumnDef=\"userEmail\">\r\n          <th mat-header-cell *matHeaderCellDef> Email Bệnh Nhân </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.user.user.email}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Appointment Date Column -->\r\n        <ng-container matColumnDef=\"appointmentDate\">\r\n          <th mat-header-cell *matHeaderCellDef> Ngày Hẹn </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.appointmentDate | date}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Appointment Time Column -->\r\n        <ng-container matColumnDef=\"appointmentTime\">\r\n          <th mat-header-cell *matHeaderCellDef> Thời Gian Hẹn </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.appointmentTime}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Booking Date Column -->\r\n        <ng-container matColumnDef=\"bookingDate\">\r\n          <th mat-header-cell *matHeaderCellDef> Ngày Đặt Lịch </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.bookingDate | date}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Reason Column -->\r\n        <ng-container matColumnDef=\"reason\">\r\n          <th mat-header-cell *matHeaderCellDef> Lý Do </th>\r\n          <td mat-cell *matCellDef=\"let appointment\"> {{appointment.reason}} </td>\r\n        </ng-container>\r\n\r\n        <!-- Status Column -->\r\n        <ng-container matColumnDef=\"status\">\r\n          <th mat-header-cell *matHeaderCellDef> Trạng Thái </th>\r\n          <td  mat-cell *matCellDef=\"let appointment\" >\r\n            <ng-container  *ngIf=\"appointment.status === 'PENDING'\">\r\n              <button mat-raised-button color=\"primary\" (click)=\"updateStatus(appointment.appointmentId,'ACCEPTED')\">Chấp Nhập</button>\r\n              <button mat-raised-button color=\"warn\" (click)=\"updateStatus(appointment.appointmentId,'REJECTED')\">Từ Chối</button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"appointment.status !== 'PENDING'\">\r\n              <button style=\"background-color: #f0f0f0;\" mat-raised-button color=\"basic\">{{appointment.status}}</button>\r\n            </ng-container>\r\n          </td>\r\n        </ng-container>\r\n\r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n      </table>\r\n      \r\n    </div>\r\n  </div>\r\n\r\n  <ng-template #noAppointments>\r\n    <div class=\"noAppointments\">\r\n      <h2>Không tìm thấy cuộc hẹn nào.</h2>\r\n    </div>\r\n  </ng-template>\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}